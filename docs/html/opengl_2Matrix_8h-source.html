<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Evolve: opengl/Matrix.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000007.html">opengl</a></div>
<h1>Matrix.h</h1><a href="opengl_2Matrix_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#ifndef _MATRIX_STU_H</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define _MATRIX_STU_H</span>
00003 <span class="preprocessor"></span>
00004 <span class="preprocessor">#include &lt;vector&gt;</span>
00005 <span class="preprocessor">#include &lt;math.h&gt;</span>
00006 <span class="preprocessor">#include &lt;sstream&gt;</span>
00007 
00008 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00009 
00010 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00011"></a><a class="code" href="opengl_2Matrix_8h.html#a0">00011</a> vector&lt;T&gt; <a class="code" href="opengl_2Matrix_8h.html#a0">matrixAdd</a>( vector&lt;T&gt; vec1, vector&lt;T&gt; vec2 )
00012 {
00013     <span class="keywordtype">int</span> maxLength;
00014     vector&lt;T&gt; result;
00015     <span class="keywordflow">if</span>( vec1.size() &lt; vec2.size() ) 
00016     {
00017         maxLength = vec1.size();
00018     }
00019     <span class="keywordflow">else</span>
00020     {
00021         maxLength = vec2.size();
00022     }
00023 
00024     <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; maxLength; ++i )
00025     {
00026         result.push_back( vec1[i] + vec2[i] ); 
00027     }
00028 
00029     <span class="keywordflow">return</span> result;
00030 }
00031 
00032 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00033"></a><a class="code" href="opengl_2Matrix_8h.html#a1">00033</a> string <a class="code" href="opengl_2Matrix_8h.html#a1">matrix9ToString</a>( vector&lt;T&gt; vec, <span class="keywordtype">bool</span> printDebug = <span class="keyword">true</span> )
00034 {
00035     <span class="keywordflow">if</span>( vec.size() != 9 )
00036     {
00037         <span class="keywordflow">if</span>( printDebug )
00038         {
00039             cout &lt;&lt; <span class="stringliteral">"error in print matrix, size of matrix != 9, its: "</span> &lt;&lt; vec.size() &lt;&lt; endl;
00040         }
00041 
00042         <span class="keywordflow">return</span> <span class="stringliteral">""</span>;
00043     }
00044 
00045     ostringstream ostream;
00046     <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; 9; ++i )
00047     {
00048         ostream &lt;&lt; vec[i] &lt;&lt; <span class="stringliteral">" "</span>;
00049         <span class="keywordflow">if</span>( (i + 1) % 3 == 0 )
00050         {
00051             ostream &lt;&lt; <span class="charliteral">'\n'</span>;
00052         }
00053     }
00054 
00055     <span class="keywordflow">return</span> ostream.str();
00056 }
00057 
00058 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00059"></a><a class="code" href="opengl_2Matrix_8h.html#a2">00059</a> vector&lt;T&gt; <a class="code" href="opengl_2Matrix_8h.html#a2">vector3Rotate</a>( vector&lt;T&gt; vec, vector&lt;T&gt; rotateAxis, <span class="keywordtype">double</span> degree, <span class="keywordtype">bool</span> printDebug = <span class="keyword">true</span> )
00060 {
00061     degree *= (3.14/180);
00062     <span class="keywordflow">if</span>( vec.size() != 3 || rotateAxis.size() != 3 )
00063     {
00064         <span class="keywordflow">if</span>( printDebug )
00065         {
00066             cout &lt;&lt; <span class="stringliteral">"Error: this function will only work on vectors in a three-dimensional manifold"</span> &lt;&lt; endl;
00067             <span class="keywordflow">return</span> vec;
00068         }
00069     }
00070     vector&lt;T&gt; result;
00071     vector&lt;T&gt; rotMatrix;    
00072     rotMatrix.resize(9);
00073     rotMatrix[0] = cos(degree);
00074     rotMatrix[1] = 0;
00075     rotMatrix[2] = -1 * sin( degree );
00076     rotMatrix[3] = 0;
00077     rotMatrix[4] = 1;
00078     rotMatrix[5] = 0;
00079     rotMatrix[6] = sin( degree );
00080     rotMatrix[7] = 0;
00081     rotMatrix[8] = cos( degree );
00082     <span class="keywordflow">if</span>( printDebug )
00083     {
00084         cout &lt;&lt; <span class="stringliteral">"rotationMatrix: \n"</span> &lt;&lt; <a class="code" href="opengl_2Matrix_8h.html#a1">matrix9ToString</a>( rotMatrix ) &lt;&lt; endl;
00085     }
00086     
00087     <span class="keywordflow">return</span> <a class="code" href="opengl_2Matrix_8h.html#a3">vector3MultMatrix</a>( vec, rotMatrix, <a class="code" href="worldServer_2SectionNames_8h.html#a5">printDebug</a> );
00088 }
00089 
00090 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00091"></a><a class="code" href="opengl_2Matrix_8h.html#a3">00091</a> vector&lt;T&gt; <a class="code" href="opengl_2Matrix_8h.html#a3">vector3MultMatrix</a>( vector&lt;T&gt; vec3, vector&lt;T&gt; matrix, <span class="keywordtype">bool</span> printDebug = <span class="keyword">true</span> )
00092 {
00093     <span class="keywordflow">if</span>( vec3.size() != 3 )
00094     {
00095         <span class="keywordflow">if</span>( printDebug )
00096         {
00097             cout &lt;&lt; <span class="stringliteral">"Error: the first argument: vec3 needs to be a three-dimensional vector"</span> &lt;&lt; endl;
00098         }
00099         <span class="keywordflow">return</span> vec3;
00100     }
00101 
00102     <span class="keywordflow">if</span>( matrix.size() % 3 != 0 )
00103     {
00104         <span class="keywordflow">if</span>( printDebug )
00105         {
00106             cout &lt;&lt; <span class="stringliteral">"Error: matrix needs to be of a size that is a integer multiple of 3"</span> &lt;&lt; endl;
00107         }
00108         <span class="keywordflow">return</span> vec3;
00109     }
00110 
00111     vector&lt;T&gt; result;
00112     result.resize(3);
00113     <span class="keywordtype">int</span> k = 0;
00114     <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0 ; i &lt; 9; i += 3 )
00115     {
00116         <span class="keywordflow">for</span>( <span class="keywordtype">int</span> j = 0; j &lt; 3; ++j )
00117         {
00118             <span class="keywordflow">if</span>( printDebug )
00119             {
00120                 cout &lt;&lt; <span class="stringliteral">"matrix[i]: "</span> &lt;&lt; matrix[i] &lt;&lt; <span class="stringliteral">" vec: "</span> &lt;&lt; vec3[j] &lt;&lt; endl;
00121             }
00122             result[k] += matrix[i + j] * vec3[j];
00123         }
00124 
00125         ++k;
00126     }
00127 
00128     <span class="keywordflow">return</span> result;
00129 }
00130 
00131 <span class="comment">//caller is reponsible for allocating the appropriate amount of memory</span>
00132 <span class="comment">//for result</span>
00133 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00134"></a><a class="code" href="opengl_2Matrix_8h.html#a4">00134</a> <span class="keywordtype">void</span> <a class="code" href="opengl_2Matrix_8h.html#a4">matrixToArray</a>( T result[], vector&lt;T&gt; vec )
00135 {
00136     <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; vec.size(); ++i )
00137     {
00138         result[i] = vec[i]; 
00139     }
00140 }
00141 
00142 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00143"></a><a class="code" href="opengl_2Matrix_8h.html#a5">00143</a> <span class="keywordtype">void</span> <a class="code" href="opengl_2Matrix_8h.html#a5">arrayToMatrix</a>( vector&lt;T&gt;&amp; vec, T array[], <span class="keywordtype">int</span> size )
00144 {
00145     <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; size; ++i )
00146     {
00147         vec.push_back( array[i] );
00148     }
00149 }
00150 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Feb 15 12:32:01 2005 for Evolve by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
